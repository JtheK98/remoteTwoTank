<html>


    <!-- Variablen für die Kommunikation mit dem PLC --> 
    
    <!-- AWP_In_Variable Name='"Web2Plc".start1'-->
    <!-- AWP_In_Variable Name='"Web2Plc".stop1'-->
    <!-- AWP_In_Variable Name='"Web2Plc".running1'-->
    <!-- AWP_In_Variable Name='"Web2Plc".stopped1'-->
    <!-- AWP_In_Variable Name='"Web2Plc".eStop'-->
    <!-- AWP_In_Variable Name='"Web2Plc".eStopReset'-->
    <!-- AWP_In_Variable Name='"Web2Plc".eStopLight'-->
    <!-- AWP_In_Variable Name='"Web2Plc".setPoint1'-->
    <!-- AWP_In_Variable Name='"Web2Plc".tankLevel1mm'-->
    <!-- AWP_In_Variable Name='"Web2Plc".setPoint1'-->
    <!-- AWP_In_Variable Name='"Web2Plc".flow1'-->
    <!-- AWP_In_Variable Name='"Web2Plc".pumpVoltage'-->
    <!-- AWP_In_Variable Name='"Web2Plc".level1mA'-->
    <!-- AWP_In_Variable Name='"Web2Plc".exper2'-->
    <!-- AWP_In_Variable Name='"Web2Plc".exper2Indicator'-->
    

    <head>
        <meta http-equiv="Content-Language" content="en" >
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
        <title>Webpage Tests</title>

        <!-- CSS file hinzufügen -->    
        <link rel="stylesheet" type="text/css" href="CSS/demo.css">
        <link rel="stylesheet" href="CSS/style.css">

        <!-- javascript files hinzufügen --> 

        <script type="text/javascript" src="script/sensor.js"></script>
        <script type="text/javascript" src="script/ajaxbase.js"></script>
        <script type="text/javascript" src="script/canvasjs.min.js"></script>

    </head>

    <body onload="Start()">
        <nav>
            <p><img src="img/university.png" alt="Logo" style="width:210px;height:100px;"></p>
            <ul>
                <li><a href="menu.html">Startpage</a></li>
                <li><a href="index.html">Control</a></li>
                <li><a href="flow.html">Flowmeter</a></li>
                <li><a href="sensor.html">Sensor Calibration</a></li>
                <li><a href="openloop.html">Open Loop System</a></li>

            </ul>
        </nav>

        <h1 id="headFlow1">Experiment 2: Level Sensor Calibration </h1>


        <svg height="80" width="50">
            <circle id="stopIndic" cx="25" cy="30" r="15" stroke="black" stroke-width="2" fill="white" />
            <text x="10" y="12" fill="black" font-size="10" font-family="Helvetica, Arial, sans-serif">E-Stop</text>
        </svg>

        <input type="button" id="estop" name="continue" onclick="setEStop('%22Web2Plc%22.eStop')" value="E-Stop">

        <input type="button" id="eReset" name="continue" onclick="resetEStop('%22Web2Plc%22.eStopReset')" value="E-Stop Reset">
          
        <input type="button" id="exper2" name="continue" onclick="sendActivate('%22Web2Plc%22.exper2')">

        <div class="wrap">
            <div class="spalte1">
                <fieldset id="tankvisualisation">
                    <legend>Level Sensor LC300</legend>
                    <svg height="390" width="330">
                        <rect id="tank.red" x="30" y="30" width="200" height="30" fill="#ff0033"  stroke-width="0" opacity="0.2"/>
                        <rect id="tank.orange" x="30" y="60" width="200" height="30" fill="#ffa500" stroke-width="0" opacity="0.2"/>
                        <rect id="tank.yellow" x="30" y="90" width="200" height="30" fill="#ffd700" stroke-width="0" opacity="0.2"/>
                        <rect id="tank.green" x="30" y="120" width="200" height="210" fill="#7cFc00" stroke-width="0" opacity="0.2"/>
                        <rect id="tank.blue" x="30" y="180" width="200" height="150" fill="#00bffF" stroke-width="1" stroke="black" opacity="0.5"/>
                        <rect id="tank.stroke" x="30" y="30" width="200" height="300" fill="transparent" stroke-width="1" stroke="black" />
                        <line x1="227" y1="30" x2="227" y2="330" stroke="black" stroke-width="5" stroke-dasharray="1 9" />
                        <text x="235" y="45" fill="black" font-size="20" font-family="Helvetica, Arial, sans-serif">190</text>
                        <text x="235" y="345" fill="black" font-size="20" font-family="Helvetica, Arial, sans-serif">0</text>
                        <text x="95" y="360" fill="black" font-size="25" font-family="Helvetica, Arial, sans-serif">Tank 1</text>
                        <g transform="translate(250, 115)">
                            <text
                              text-anchor="end"
                              transform="rotate(-90)"
                              font-family="Helvetica, Arial, sans-serif"
                              fill="black"
                              font-size="20"
                            >
                            Liquid level [mm]
                            </text>
                          </g>                
                    </svg><br>
                </fieldset>
                <fieldset id="system" >
                    <legend>System Readings</legend>
                    <p id="supply">Liquid level: <span id="level">0 mm</span></p>
                    <br>
                    <br>
                    <p id="supply">Sensor output: <span id="current">4 mA</span></p>
                </fieldset>
                <fieldset id="system" >
                    <legend>Manual</legend>
                    <button id="buttonhideshow" onclick="hideshowfunction()">Toggle Manual</button>
                    <div id="hideshow">
                        <p>Initial Control Settings:
                        <li>Valve A and B Closed.</li>
                        <li>Valve C fully opened.</li>  
                        </p>
                        <br>
                        <p>Procedure:
                            <li>Increasing n1: Start the pump and stop it when liquid level reading is 10 mm. If the value exceeded 10 mm, slowly open Valve B and allow small amount of water to drain, and closed it when you reach 10 mm. At 10 mm record the sensor output current in n1 column. Repeat until liquid level reach 190 mm.</li> 
                            <li>Decreasing n1: Now slowly open Valve B allow water to drain and close Valve B when level is 190 mm, record the sensor output value. Repeat until 0mm.</li>
                            <li> Increasing n2: Repeat step 1.</li>
                            <li> Decreasing n2: Repeat step 2.</li>
                            <li> Average: Calculate the average of n1 and n2 for both directions.</li>
                            <li> PLOT the results to obtain the characteristic of liquid level against sensor output (Average), for both increasing and decreasing sensor output currents.</li>
                        </p>
                    </div>
                </fieldset>
            </div>
            <div class="spalte2">
                <fieldset id="operator" >
                    <legend>Operator Panel</legend>
                    <input type="button" id="start1" name="continue" onclick="setVariable('%22Web2Plc%22.start1')" value="Start Pump1">
                    <input type="button" id="stop1" name="continue" onclick="setVariable('%22Web2Plc%22.stop1')" value="Stop Pump1">

                    <p>
                        <svg height="150" width="200">
                            <circle id="tank1empty" cx="100" cy="90" r="40" stroke="black" stroke-width="3" fill="white" />
                            <text x="40" y="40" fill="black" font-size="20" font-family="Helvetica, Arial, sans-serif">Tank 1 empty</text>
                        </svg> 
                        <svg height="150" width="200">
                            <circle id="resevoirempty" cx="100" cy="90" r="40" stroke="black" stroke-width="3" fill="white" />
                            <text x="40" y="40" fill="black" font-size="20" font-family="Helvetica, Arial, sans-serif">Resevoir empty</text>
                        </svg>
                    </p>
                    <p>
                        <svg height="150" width="200">
                            <circle id="pump1running" cx="100" cy="90" r="40" stroke="black" stroke-width="3" fill="white" />
                            <text x="40" y="40" fill="black" font-size="20" font-family="Helvetica, Arial, sans-serif">Pump 1 running</text>
                        </svg> 
                        <svg height="150" width="200">
                            <circle id="pump1stopped" cx="100" cy="90" r="40" stroke="black" stroke-width="3" fill="red" />
                            <text x="40" y="40" fill="black" font-size="20" font-family="Helvetica, Arial, sans-serif">Pump 1 stopped</text>
                        </svg>
                    </p>    
                    
                </fieldset>
        
                <fieldset id="datasheet" >
                    <legend>Sensor Information</legend>
                    <p>
                        <a href="https://www.icenta.co.uk/uploads/1/1/4/7/114709647/sitrans-lc300-capacitance-level-transmitter-ic.pdf" aria-label="datasheet level sensor">
                            <img src="img/levelsensorinfo.PNG" alt="Sensor info" style="width:400;height:auto;">
                        </a>
                    </p>
                    <p>
                        <a href="https://www.icenta.co.uk/uploads/1/1/4/7/114709647/sitrans-lc300-capacitance-level-transmitter-ic.pdf" aria-label="datasheet level sensor">
                            <img src="img/levelsensorspecification.PNG" alt="Sensor specification" style="width:400px;height:auto;">
                        </a>
                    </p>
                </fieldset>
            </div>

        </div>
        

       

    </body>


 </html>

